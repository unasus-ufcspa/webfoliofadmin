<!DOCTYPE html>
<html>
    <head>
        <!-- Standard Meta -->
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <title>Administradores</title>

        <script src="/webfolioAdmin/node_modules/semantic-ui/node_modules/jquery/dist/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="/webfolioAdmin/semantic/dist/semantic.min.css">

        <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/webfolioAdmin/assets/css/administradores.css">

    </head>
    <body>
        {{ include('menuLateral.html.twig') }}
        <div id="header">
            <img src="../assets/img/person-branco.png" id="iconPessoa">
            <span id="titulo">ADMINISTRADORES</span>
        </div>
        <div id="pesquisa">
          <img src="../assets/img/lupa.png" id="iconLupa" title="Pesquisar">
          <input type="text" placeholder="Procurar Administrador" id="inputPesquisa"> <!-- ToDo: implmentar pesquisa - Gabriel -->
          <div class="ui medium button" id="addAdmin">NOVO ADMIN</div>
        </div>

        <div id="editarAdmin">
          <div id="closeEditar" onclick="closeEditar();">+</div>
          <div class="rowEditar">
            <img src="../assets/img/person-branco.png" class="iconesFormEditar">
            <input type="text" placeholder="Nome" class="formEditar">
          </div>

          <div class="rowEditar">
            <img src="../assets/img/arroba.png" class="iconesFormEditar">
            <input type="text" placeholder="E-mail" class="formEditar">
          </div>

          <div class="rowEditar">
            <img src="../assets/img/lock.png" class="iconesFormEditar">
            <input type="password" placeholder="Senha" class="formEditar">
          </div>

          <div class="rowEditar">
            <img src="../assets/img/lock.png" class="iconesFormEditar">
            <input type="password" placeholder="Confirmar senha" class="formEditar">
          </div>

          <div id="colunaDireita">
            <div class="rowEditar">
              <img src="../assets/img/phone.png" class="iconesFormEditarRight">
              <input type="text" placeholder="Celular" class="formEditarRight">
            </div>
            <div class="rowEditar">
              <img src="../assets/img/rg.png" class="iconesFormEditarRight">
              <input type="text" placeholder="RG" class="formEditarRight">
            </div>
            <div id="salvarEdicao">SALVAR</div>
          </div>
        </div>
        <h2 id="naoEncontrado">Nenhum resultado encontrado</h2>
        <div id="listaAdmins">
            {% set i=0%}
            {% for administrador in administradores %} <!--Aqui vai o For pra listar usuários-->

                {% if i is even %} <!--Testa se é par ou ímpar só pra poder aplicar o CSS no item da lista-->
                    <div class="itemAdminA itemUsuario">
                        <input type="checkbox" name="Administrador" value="{{administrador.idUser}}" id="{{i}}" class="checkboxAdmin"> <!--O id desse item tem que ser o contador pra que o checkbox funcione-->
                        <label for="{{i}}"></label> <!--Dentro desse for vai o id que foi colocado no checkbox pra que um fique ligado ao outro-->
                        <div class="nomeTutor">{{administrador.nmUser}}</div> <!--ToDo: adicionar nome do usuário-->
                        <div class="emailTutor">{{administrador.dsEmail}}</div> <!--ToDo: adicionar email-->
                        <img src="../assets/img/buttonPencil.png" class="iconEditar" title="Editar administrador" onclick="editarAdministrador();">
                    </div>
                {% else %}
                    <div class="itemAdminB itemUsuario">
                        <input type="checkbox" name="Administrador" value="{{administrador.idUser}}" id="{{i}}" class="checkboxAdmin">
                        <label for="{{i}}"></label>
                        <div class="nomeTutor">{{administrador.nmUser}}</div>
                        <div class="emailTutor">{{administrador.dsEmail}}</div>
                        <img src="../assets/img/buttonPencil.png" class="iconEditar" title="Editar administrador" onclick="editarAdministrador();">
                    </div>
                {% endif %}
                {% set i = i+1 %}
            {% endfor %}
            {%if administradores is empty %}
                {#TO-DO: Exibir mensagem quando não houverem administradores cadastrados#}
            {%endif%}
        </div>

        <div id="delete">
           <img src="../assets/img/lixo.png" id="iconDelete" title="Excluir item"> 
        </div>
    </body>
</html>
<script>
  function editarAdministrador(){
    var edit = document.getElementById("editarAdmin");
    edit.style.display="block";
  }
  function closeEditar(){
    var edit = document.getElementById("editarAdmin");
    edit.style.display="none";
  }

  //FUNÇÕES DA BUSCA
      var fazerBusca = function(){
        var txt = $('#inputPesquisa').val();
        $('.nomeTutor').each(function(){
           if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) == -1){
               $(this).closest('.itemUsuario').hide();
           }
        });
        var itens = document.getElementsByClassName("itemUsuario");
        var flagItens= true;
        for(var i=0; i<itens.length; i++){
          if(itens[i].style.display!="none"){
            flagItens=false;
          }
        }
        if(flagItens){
          document.getElementById("naoEncontrado").style.visibility="visible";
        }else{
          document.getElementById("naoEncontrado").style.visibility="hidden";
        }
      };

      var limparBusca = function(){
        $('.nomeTutor').each(function(){
           $(this).closest('.itemUsuario').show();
        });
      };

      $("#inputPesquisa").keydown(function(e) {
          limparBusca();
          fazerBusca();
      });

      $('#iconLupa').click(function(){
        if($('#inputPesquisa').val()!=""){
          limparBusca();
          fazerBusca();
        }else{
          limparBusca();
        }
      });
</script>
